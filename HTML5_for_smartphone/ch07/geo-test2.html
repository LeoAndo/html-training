<!DOCTYPE html>
<html><head><meta charset="utf-8"></head><body>
<input type="button" value="位置情報取得" onclick="showPos()"/>
<!-- Android 1.6対策 -->
<script type="text/javascript" src="gear5-0.3.js"></script>
<script type="text/javascript">
  function showPos() {
    // geolocation に対応しているかチェック
    if (navigator.geolocation == undefined) {
      alert("位置情報が利用できません。"); return;
    }
    // 位置情報の取得
    navigator.geolocation.getCurrentPosition(
      successCallback,
      errorCallback);
    // 成功したとき
    function successCallback(position) {
      var lat = position.coords.latitude;
      var lon = position.coords.longitude;
      var uri = "http://maps.google.co.jp/m/?q=" + lat + "," + lon;
      document.write("<h1>地図の表示</h1>");
      document.write("<a href='" + uri + "'>現在地を表示</a>");
    }
    // 失敗したとき
    function errorCallback(err) {
        alert("失敗("+err.code+")"+err.message);
    }
  };
</script>
</body></html>
